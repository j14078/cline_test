ｓ# 画像処理確認アプリ設計書

## 1. 要件定義書

### 1.1. 目的
画像処理の処理内容を確認するためのstreamlitアプリを作成する。

### 1.2. 機能
- フォルダ選択機能
- 画像処理の選択と適用
- 処理前、処理後の画面表示
- 処理履歴の表示と選択
- pythonコードの出力

### 1.3. 環境
- windows環境

## 2. 設計書

### 2.1. 概略
streamlitでGUIを提供し、画像処理ライブラリ（PILなど）を用いて画像処理を行う。
処理履歴を管理し、選択した履歴に応じて処理後の画面を更新する。
処理内容をpythonコードとして出力する機能を提供する。

### 2.2. 機能構成
1.  **フォルダ選択機能**:
    - フォルダを選択するGUIを提供する。
    - 選択されたフォルダのパスを保持する。
2.  **画像処理の選択と適用**:
    - 適用可能な画像処理の一覧をGUIに表示する。
    - 選択された画像処理とパラメータを保持する。
    - 適用ボタンが押されたら、選択された画像処理を画像に適用する。
3.  **処理前、処理後の画面表示**:
    - 処理前の画像と処理後の画像をGUIに表示する。
4.  **処理履歴の表示と選択**:
    - 適用された画像処理の履歴をGUIに表示する。
    - 履歴が選択されたら、対応する処理後の画像を画面に表示する。
5.  **pythonコードの出力**:
    - 現在の処理内容をpythonコードとして出力する。

### 2.3. クラス構成

-   **App**: streamlitアプリのメインクラス
    -   `folder_path`: 選択されたフォルダのパス
    -   `image_processor`: `ImageProcessor`クラスのインスタンス
    -   `history_manager`: `HistoryManager`クラスのインスタンス
    -   `select_folder()`: フォルダを選択する機能
    -   `apply_process()`: 画像処理を適用する機能
    -   `display_images()`: 画像を表示する機能
    -   `display_history()`: 履歴を表示する機能
    -   `generate_code()`: コードを生成する機能
-   **ImageProcessor**: 画像処理を行うクラス
    -   `process_image()`: 画像処理を行う
-   **HistoryManager**: 処理履歴を管理するクラス
    -   `add_history()`: 履歴を追加する
    -   `get_history()`: 履歴を取得する
    -   `get_image()`: 履歴に対応する画像を取得する
-   **CodeGenerator**: コードを生成するクラス
    -   `generate_code()`: コードを生成する